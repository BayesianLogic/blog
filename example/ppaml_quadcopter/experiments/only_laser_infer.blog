random Real x ~ UniformReal(-8.0, 8.0);
random Real y ~ UniformReal(-8.0, 8.0);
random Real theta ~ UniformReal(0.0 - pi, pi);

// FIXME: For some reason, "-pi" gets parsed as a Boolean.

fixed Set obstacles = { [3.0, 4.0, 1.0], [5.0, 2.0, 1.0] };

fixed Real[] laserReadings(
        Real laserX, Real laserY, Real laserTheta, Set obstacles)
    = LaserInterp();

fixed RealMatrix lasers_sigma = 0.1 * eye(361);

random RealMatrix lasers ~ MultivarGaussian(
    laserReadings(x, y, theta, obstacles), lasers_sigma);

obs lasers = [
    9.946559703406278; 9.961598165725846; 9.978896883570828;
    10.034210629010564; 9.971382391475888; 9.98109020156255;
    10.004734968814866; 10.002583667572113; 10.003978017379751;
    10.00908926827846; 10.020837283607152; 9.97961631248566;
    9.995360893986748; 9.978272918274143; 10.022161027043424;
    10.011893519611185; 9.99607732802196; 10.008981992739459;
    9.991675113802076; 10.013680545152559; 10.048802241790233;
    10.015735051929674; 10.02649784390141; 9.990046013313325;
    9.993223904461384; 9.99529420076717; 10.016233136082132;
    10.03028729461291; 10.022996592343707; 10.06372244773691;
    9.963717293709523; 5.0301186958337905; 4.952552196327196;
    4.828752042574934; 4.740923430744799; 4.68263633810047;
    4.622891064639822; 4.601018645411176; 4.565555030569255;
    4.637032099086; 4.560934747678927; 4.555405474304361;
    4.507776188444737; 4.428932998928005; 4.51968950186728;
    4.451950220655293; 4.452774194148547; 4.473793809037507;
    4.403150705075787; 4.388197430297802; 4.382134293418678;
    4.403082144075804; 4.3657494101547565; 4.435786211983341;
    4.386938835835732; 4.412380854057189; 4.365067795970017;
    4.410782410338484; 4.418555289235106; 4.411574855745145;
    4.42693892859711; 4.430892006118373; 4.453490625349316;
    4.486106598249808; 4.525911725761324; 4.531493811472997;
    4.6425700561892755; 4.65701682729303; 4.672831302691768;
    4.721526406540411; 4.8154585082567865; 4.943654070101128;
    5.0060310586589125; 5.174695140463023; 9.980402186951544;
    10.025156945104978; 10.013736453585123; 9.974875415486103;
    9.97992046823504; 9.987860991444123; 10.03326265780546;
    10.00548826349629; 10.085134076860253; 9.984230722700223;
    10.004084292704519; 10.04777247103945; 9.945765245203873;
    9.98026770278883; 10.012300104761845; 10.032965167541027;
    10.002234322363082; 10.016109927583338; 4.692273537265188;
    4.517747559940967; 4.46722739662488; 4.322347798872174;
    4.345398313478099; 4.3040067567962526; 4.237961005487962;
    4.15582999615401; 4.191873345119885; 4.1886261243514475;
    4.103111942462539; 4.1155058305002905; 4.097234750530023;
    4.036158986809662; 4.016626673015547; 4.03357080510095;
    4.026519054591343; 4.056647540410806; 3.988443762189844;
    3.929664163620356; 3.952334463221387; 4.008383279354581;
    4.040180959861415; 3.9723289878940187; 4.010495419189047;
    4.003744138493437; 4.042430376167842; 4.050258324720845;
    4.020010199036945; 3.9506533588521084; 4.093099411199928;
    4.066848673627931; 4.059755072854159; 4.028837808384173;
    4.1021486480039995; 4.081299376284622; 4.129920741181039;
    4.176632991220131; 4.227975410968102; 4.279882238409743;
    4.350766950980137; 4.390698059917898; 4.356507100180976;
    4.5038446119765725; 4.586390504003073; 4.67917338451036;
    9.943671042123595; 10.024333764960444; 9.999385667113515;
    9.941141170768365; 9.979483841892423; 9.979873387519506;
    9.980159325444722; 9.887137157192507; 9.948586331610533;
    10.011093615962562; 10.00258172666085; 10.025929643756335;
    10.008140949484947; 9.961265332234603; 10.002138274156646;
    10.050570424140597; 10.011463013721256; 10.049118160255125;
    10.027261838576832; 9.968283791934743; 9.970054296002118;
    10.022201536784758; 10.004149270902449; 10.012890847952832;
    9.96916629247549; 10.012834576324924; 9.997644613882;
    10.073069254311854; 9.986688804808795; 10.009842320156636;
    9.944091984227343; 9.994390498044604; 9.958903085431418;
    9.963036245898703; 9.969948582198747; 10.020164583499081;
    9.96110337925786; 9.978814333424625; 9.964810963757408;
    9.939837741540009; 9.953135585257591; 9.953837191848898;
    9.946858255668822; 9.96248757602566; 10.02423021181518;
    10.006538007616767; 9.990349526973564; 10.076782087001396;
    9.959104789897237; 10.02301334034863; 9.982041553788417;
    9.979453414722485; 10.031111710561479; 10.018055696140175;
    10.00548089909183; 9.952162597938262; 10.038741682056285;
    9.993768223213564; 9.967934382669888; 10.026875596021558;
    9.965476934059597; 10.004801105445381; 10.024716005526948;
    10.042673868944107; 10.044276753160124; 10.01223065093134;
    9.985807367098044; 9.991232997842127; 10.003603664581034;
    9.976137811228051; 10.01414301234768; 10.017162180107919;
    9.952901286489022; 9.990722083388643; 9.982817505495584;
    9.966655809320798; 10.013818863951242; 9.989681041969446;
    9.971225284493933; 10.00072212110202; 9.989111278193558;
    10.003497249666427; 9.99130628810382; 9.926132439836593;
    9.973336767315192; 10.022365040188866; 10.057392126211422;
    10.029062037927057; 10.017404533789366; 9.97926975098216;
    10.008694871721552; 9.98726155880287; 10.032029442250444;
    9.99852210576057; 10.036477626795227; 10.017280439707392;
    9.997161994295178; 10.015836293809986; 10.006472838453334;
    9.971995749032617; 9.984317254603605; 9.933886771494834;
    10.027871145926776; 10.00356376680706; 9.972066524783907;
    9.914532640552803; 10.039890425402268; 10.008621048040615;
    9.971038855558026; 10.018829650330298; 10.01810709687105;
    10.001762399253504; 10.001204432856738; 10.022407220463885;
    10.044359055409918; 10.027222283151321; 9.998505401926773;
    9.985221218584229; 9.99973585094672; 10.002689719155427;
    10.035086833618879; 9.939223814390854; 9.968805453418511;
    10.02190354160861; 10.026988823575481; 10.089019663647134;
    9.98540545321326; 9.989708559726298; 9.975064985213457;
    10.000326925572297; 10.05167156460866; 9.976747035161269;
    10.015985212024626; 10.009755726235278; 9.977957026330966;
    9.978427458829717; 10.025073674222407; 9.966936859839565;
    10.019671447091788; 9.949967539852647; 9.964773198356822;
    9.962900814727924; 9.99330959160138; 10.041843248025417;
    9.974204642056954; 9.962287749465535; 9.98180268512775;
    9.959977749513007; 9.998010102497073; 10.021618072452068;
    9.992321468845752; 10.06492502019545; 10.007689169566023;
    9.946578558422559; 9.992670847290677; 9.93245931010482;
    10.02060168377389; 10.016853318539601; 10.01127956802372;
    9.971419517122005; 9.994604876344022; 10.02956611699942;
    9.970583129104686; 10.004171536590846; 9.935451794220263;
    9.934429974567673; 9.962042458866362; 9.994802323687788;
    9.963673160949112; 9.952236281743478; 10.05418725999297;
    9.963036149024378; 9.976093776972919; 9.98332089688093;
    9.959874432427437; 10.04437657350787; 9.996933319596348;
    9.98661959667755; 10.0498527684466; 10.009785316652737;
    10.019865070528684; 9.987214225492002; 9.980137710318257;
    9.988933681587094; 10.014362233508423; 9.991990677660306;
    9.982242549443802; 9.975742429635863; 10.02716947972815;
    10.008693933811665; 10.003026005585026; 10.036425709996543;
    10.037620165892243; 10.008937790519859; 9.98386393934609;
    9.98715609368602; 9.948446689615466; 10.011191655961364;
    10.037604781221054; 9.99167191853463; 10.037389384214176;
    9.99786994398702; 9.97974410867818; 10.010334415345442;
    10.016013929476713; 9.98564057619522; 10.01811668324272;
    9.96140153726017; 9.964909945263932; 9.970270498294516;
    9.949064675504912; 10.02348866412102; 10.014919271353552;
    9.951639823178269; 10.073899842648384; 9.966974833348125;
    10.000772443222651; 9.997124157653852; 10.005513515194952;
    9.984387714262189; 10.041518874556088; 10.027383703335913;
    9.99040514485353
];

query [x, y, theta];
